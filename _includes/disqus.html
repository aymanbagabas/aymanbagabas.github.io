{% if jekyll.environment == "production" && site.disqus.shortname %}
<div id="disqus_thread">
  <button class="disqus-load" onClick="loadDisqusComments()">
    Load Comments
  </button>
</div>
<script>

  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW
  *  TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT:s
  *  https://disqus.com/admin/universalcode/#configuration-variables
  */
  var disqus_config = function () {
    this.page.url = "{{ page.url | absolute_url }}";
    this.page.identifier = "{{ page.guid }}" || "{{ page.id }}" ||
      "{{ page.url | absolute_url }}";
  }
  function loadDisqusComments() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//{{ site.disqus.shortname }}.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  }
</script>
<noscript>
  Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript">comments powered by Disqus</a>.
</noscript>

{% else %}
<p>
  You are seeing this because your Disqus shortname is not properly set or
  you're not running a production environment. To configure Disqus, you should
  edit your <code>_config.yml</code> to include either a
  <code>disqus.shortname</code> variable.

  {% if jekyll.environment != "production" %}
<p>
  Page guid: <code>{{ page.guid }}</code>.
</p>

<p>
  Page id: <code>{{ page.id }}</code>.
</p>
{% endif %}
</p>

<p>
  If you do not wish to use Disqus, override the
  <code>comments.html</code> partial for this theme.
</p>
{% endif %}